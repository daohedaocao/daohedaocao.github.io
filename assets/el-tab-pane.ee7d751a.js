import{u as K,_ as ae,E as D,B as pe,g as ge,d as he,K as ye,U as se,a as _e,l as Q,L as Z}from"./index.ac17342c.js";import{b as U,d as M,a as q,E as G,r as E,w as k,q as X,aW as F,o as ne,g as le,m as oe,u as B,n as Ne,L as Y,a3 as ee,e as V,H as re,ak as Te,t as b,F as ie,G as Pe,l as ce,f as we,ag as Ee,ao as Se,v as Ce,x as $e,A as xe,p as Be,P as ke}from"./index.d15ac50b.js";import{e as ue,g as Oe,h as Re,u as ze}from"./index.4af098ab.js";import{m as de}from"./typescript.72bf8adc.js";import{t as J,E as I}from"./index.bff7b787.js";const H=Symbol("tabsRootContextKey"),Ae=U({tabs:{type:M(Array),default:()=>de([])}}),Fe={name:"ElTabBar"},Le=q({...Fe,props:Ae,setup(e,{expose:i}){const x=e,T="ElTabBar",n=Y(),_=G(H);_||J(T,"<el-tabs><el-tab-bar /></el-tabs>");const m=K("tabs"),c=E(),p=E(),u=()=>{let l=0,S=0;const g=["top","bottom"].includes(_.props.tabPosition)?"width":"height",o=g==="width"?"x":"y";return x.tabs.every(t=>{var h,f,C,O;const R=(f=(h=n.parent)==null?void 0:h.refs)==null?void 0:f[`tab-${t.paneName}`];if(!R)return!1;if(!t.active)return!0;S=R[`client${F(g)}`];const L=o==="x"?"left":"top";l=R.getBoundingClientRect()[L]-((O=(C=R.parentElement)==null?void 0:C.getBoundingClientRect()[L])!=null?O:0);const z=window.getComputedStyle(R);return g==="width"&&(x.tabs.length>1&&(S-=Number.parseFloat(z.paddingLeft)+Number.parseFloat(z.paddingRight)),l+=Number.parseFloat(z.paddingLeft)),!1}),{[g]:`${S}px`,transform:`translate${F(o)}(${l}px)`}},v=()=>p.value=u();return k(()=>x.tabs,async()=>{await X(),v()},{immediate:!0}),ue(c,()=>v()),i({ref:c,update:v}),(l,S)=>(ne(),le("div",{ref_key:"barRef",ref:c,class:oe([B(m).e("active-bar"),B(m).is(B(_).props.tabPosition)]),style:Ne(p.value)},null,6))}});var Me=ae(Le,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const Ve=U({panes:{type:M(Array),default:()=>de([])},currentName:{type:[String,Number],default:""},editable:Boolean,onTabClick:{type:M(Function),default:ee},onTabRemove:{type:M(Function),default:ee},type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),te="ElTabNav",De=q({name:te,props:Ve,setup(e,{expose:i}){const x=Y(),T=G(H);T||J(te,"<el-tabs><tab-nav /></el-tabs>");const n=K("tabs"),_=Oe(),m=Re(),c=E(),p=E(),u=E(),v=E(!1),l=E(0),S=E(!1),g=E(!0),o=V(()=>["top","bottom"].includes(T.props.tabPosition)?"width":"height"),t=V(()=>({transform:`translate${o.value==="width"?"X":"Y"}(-${l.value}px)`})),h=()=>{if(!c.value)return;const a=c.value[`offset${F(o.value)}`],r=l.value;if(!r)return;const s=r>a?r-a:0;l.value=s},f=()=>{if(!c.value||!p.value)return;const a=p.value[`offset${F(o.value)}`],r=c.value[`offset${F(o.value)}`],s=l.value;if(a-s<=r)return;const P=a-s>r*2?s+r:a-r;l.value=P},C=async()=>{const a=p.value;if(!v.value||!u.value||!c.value||!a)return;await X();const r=u.value.querySelector(".is-active");if(!r)return;const s=c.value,P=["top","bottom"].includes(T.props.tabPosition),N=r.getBoundingClientRect(),y=s.getBoundingClientRect(),$=P?a.offsetWidth-y.width:a.offsetHeight-y.height,w=l.value;let d=w;P?(N.left<y.left&&(d=w-(y.left-N.left)),N.right>y.right&&(d=w+N.right-y.right)):(N.top<y.top&&(d=w-(y.top-N.top)),N.bottom>y.bottom&&(d=w+(N.bottom-y.bottom))),d=Math.max(d,0),l.value=Math.min(d,$)},O=()=>{if(!p.value||!c.value)return;const a=p.value[`offset${F(o.value)}`],r=c.value[`offset${F(o.value)}`],s=l.value;if(r<a){const P=l.value;v.value=v.value||{},v.value.prev=P,v.value.next=P+r<a,a-P<r&&(l.value=a-r)}else v.value=!1,s>0&&(l.value=0)},R=a=>{const r=a.code,{up:s,down:P,left:N,right:y}=I;if(![s,P,N,y].includes(r))return;const $=Array.from(a.currentTarget.querySelectorAll("[role=tab]")),w=$.indexOf(a.target);let d;r===N||r===s?w===0?d=$.length-1:d=w-1:w<$.length-1?d=w+1:d=0,$[d].focus(),$[d].click(),L()},L=()=>{g.value&&(S.value=!0)},z=()=>S.value=!1;return k(_,a=>{a==="hidden"?g.value=!1:a==="visible"&&setTimeout(()=>g.value=!0,50)}),k(m,a=>{a?setTimeout(()=>g.value=!0,50):g.value=!1}),ue(u,O),re(()=>setTimeout(()=>C(),0)),Te(()=>O()),i({scrollToActiveTab:C,removeFocus:z}),k(()=>e.panes,()=>x.update(),{flush:"post"}),()=>{const a=v.value?[b("span",{class:[n.e("nav-prev"),n.is("disabled",!v.value.prev)],onClick:h},[b(D,null,{default:()=>[b(pe,null,null)]})]),b("span",{class:[n.e("nav-next"),n.is("disabled",!v.value.next)],onClick:f},[b(D,null,{default:()=>[b(ge,null,null)]})])]:null,r=e.panes.map((s,P)=>{var N,y,$,w;const d=(y=(N=s.props.name)!=null?N:s.index)!=null?y:`${P}`,W=s.isClosable||e.editable;s.index=`${P}`;const ve=W?b(D,{class:"is-icon-close",onClick:A=>e.onTabRemove(s,A)},{default:()=>[b(he,null,null)]}):null,fe=((w=($=s.slots).label)==null?void 0:w.call($))||s.props.label,me=s.active?0:-1;return b("div",{ref:`tab-${d}`,class:[n.e("item"),n.is(T.props.tabPosition),n.is("active",s.active),n.is("disabled",s.props.disabled),n.is("closable",W),n.is("focus",S.value)],id:`tab-${d}`,key:`tab-${d}`,"aria-controls":`pane-${d}`,role:"tab","aria-selected":s.active,tabindex:me,onFocus:()=>L(),onBlur:()=>z(),onClick:A=>{z(),e.onTabClick(s,d,A)},onKeydown:A=>{W&&(A.code===I.delete||A.code===I.backspace)&&e.onTabRemove(s,A)}},[fe,ve])});return b("div",{ref:u,class:[n.e("nav-wrap"),n.is("scrollable",!!v.value),n.is(T.props.tabPosition)]},[a,b("div",{class:n.e("nav-scroll"),ref:c},[b("div",{class:[n.e("nav"),n.is(T.props.tabPosition),n.is("stretch",e.stretch&&["top","bottom"].includes(T.props.tabPosition))],ref:p,style:t.value,role:"tablist",onKeydown:R},[e.type?null:b(Me,{tabs:[...e.panes]},null),r])])])}}}),Ie=U({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:M(Function),default:()=>!0},stretch:Boolean}),j=e=>we(e)||_e(e),Ke={[se]:e=>j(e),"tab-click":(e,i)=>i instanceof Event,"tab-change":e=>j(e),edit:(e,i)=>["remove","add"].includes(i),"tab-remove":e=>j(e),"tab-add":()=>!0};var Ue=q({name:"ElTabs",props:Ie,emits:Ke,setup(e,{emit:i,slots:x,expose:T}){var n,_;const m=K("tabs"),c=E(),p=ie({}),u=E((_=(n=e.modelValue)!=null?n:e.activeName)!=null?_:"0"),v=t=>{u.value=t,i(se,t),i("tab-change",t)},l=async t=>{var h,f,C;if(!(u.value===t||Q(t)))try{await((h=e.beforeLeave)==null?void 0:h.call(e,t,u.value))!==!1&&(v(t),(C=(f=c.value)==null?void 0:f.removeFocus)==null||C.call(f))}catch{}},S=(t,h,f)=>{t.props.disabled||(l(h),i("tab-click",t,f))},g=(t,h)=>{t.props.disabled||Q(t.props.name)||(h.stopPropagation(),i("edit",t.props.name,"remove"),i("tab-remove",t.props.name))},o=()=>{i("edit",void 0,"add"),i("tab-add")};return ze({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},V(()=>!!e.activeName)),k(()=>e.activeName,t=>l(t)),k(()=>e.modelValue,t=>l(t)),k(u,async()=>{var t;await X(),(t=c.value)==null||t.scrollToActiveTab()}),Pe(H,{props:e,currentName:u,registerPane:f=>p[f.uid]=f,unregisterPane:f=>delete p[f]}),T({currentName:u}),()=>{const t=e.editable||e.addable?b("span",{class:m.e("new-tab"),tabindex:"0",onClick:o,onKeydown:C=>{C.code===I.enter&&o()}},[b(D,{class:m.is("icon-plus")},{default:()=>[b(ye,null,null)]})]):null,h=b("div",{class:[m.e("header"),m.is(e.tabPosition)]},[t,b(De,{ref:c,currentName:u.value,editable:e.editable,type:e.type,panes:Object.values(p),stretch:e.stretch,onTabClick:S,onTabRemove:g},null)]),f=b("div",{class:m.e("content")},[ce(x,"default")]);return b("div",{class:[m.b(),m.m(e.tabPosition),{[m.m("card")]:e.type==="card",[m.m("border-card")]:e.type==="border-card"}]},[...e.tabPosition!=="bottom"?[h,f]:[f,h]])}}});const qe=U({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),He=["id","aria-hidden","aria-labelledby"],We={name:"ElTabPane"},je=q({...We,props:qe,setup(e){const i=e,x="ElTabPane",T=Y(),n=Ee(),_=G(H);_||J(x,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const m=K("tab-pane"),c=E(),p=V(()=>i.closable||_.props.closable),u=Z(()=>{var o;return _.currentName.value===((o=i.name)!=null?o:c.value)}),v=E(u.value),l=V(()=>{var o;return(o=i.name)!=null?o:c.value}),S=Z(()=>!i.lazy||v.value||u.value);k(u,o=>{o&&(v.value=!0)});const g=ie({uid:T.uid,slots:n,props:i,paneName:l,active:u,index:c,isClosable:p});return re(()=>{_.registerPane(g)}),Se(()=>{_.unregisterPane(g.uid)}),(o,t)=>B(S)?Ce((ne(),le("div",{key:0,id:`pane-${B(l)}`,class:oe(B(m).b()),role:"tabpanel","aria-hidden":!B(u),"aria-labelledby":`tab-${B(l)}`},[ce(o.$slots,"default")],10,He)),[[$e,B(u)]]):xe("v-if",!0)}});var be=ae(je,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const Ze=Be(Ue,{TabPane:be}),et=ke(be);export{et as E,Ze as a};
