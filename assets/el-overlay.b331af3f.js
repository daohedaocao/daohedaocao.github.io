import{c as Y,i as G,h as H,p as R,e as W,r as K,u as q,b as j,U as V,n as Z,q as J,j as z}from"./index.ac17342c.js";import{H as $,ab as P,I as Q,i as F,w as k,ac as ee,a3 as g,b as _,d as h,a as oe,t as te,l as X,J as ne,r as D,ad as se,e as le,q as ae,L as ue}from"./index.d15ac50b.js";import{t as ie,u as de}from"./index.bff7b787.js";import{a as U}from"./index.4af098ab.js";import{g as ce}from"./focus-trap.b05075ab.js";var O=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(O||{});const Me=(e,o,s)=>{let t={offsetX:0,offsetY:0};const a=c=>{const l=c.clientX,v=c.clientY,{offsetX:r,offsetY:m}=t,i=e.value.getBoundingClientRect(),f=i.left,C=i.top,w=i.width,x=i.height,B=document.documentElement.clientWidth,N=document.documentElement.clientHeight,b=-f+r,p=-C+m,E=B-f-w+r,I=N-C-x+m,T=S=>{const M=Math.min(Math.max(r+S.clientX-l,b),E),L=Math.min(Math.max(m+S.clientY-v,p),I);t={offsetX:M,offsetY:L},e.value.style.transform=`translate(${Y(M)}, ${Y(L)})`},y=()=>{document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",T),document.addEventListener("mouseup",y)},u=()=>{o.value&&e.value&&o.value.addEventListener("mousedown",a)},n=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",a)};$(()=>{P(()=>{s.value?u():n()})}),Q(()=>{n()})},re=e=>{if(F(e)||ie("[useLockscreen]","You need to pass a ref param to this function"),!G||H(document.body,"el-popup-parent--hidden"))return;let o=0,s=!1,t="0",a=0;const u=()=>{K(document.body,"el-popup-parent--hidden"),s&&(document.body.style.paddingRight=t)};k(e,n=>{if(!n){u();return}s=!H(document.body,"el-popup-parent--hidden"),s&&(t=document.body.style.paddingRight,a=Number.parseInt(R(document.body,"paddingRight"),10)),o=ce();const c=document.documentElement.clientHeight<document.body.scrollHeight,l=R(document.body,"overflowY");o>0&&(c||l==="scroll")&&s&&(document.body.style.paddingRight=`${a+o}px`),W(document.body,"el-popup-parent--hidden")}),ee(()=>u())},fe=e=>{if(!e)return{onClick:g,onMousedown:g,onMouseup:g};let o=!1,s=!1;return{onClick:n=>{o&&s&&e(n),o=s=!1},onMousedown:n=>{o=n.target===n.currentTarget},onMouseup:n=>{s=n.target===n.currentTarget}}},me=_({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:h([String,Array,Object])},zIndex:{type:h([String,Number])}}),ye={click:e=>e instanceof MouseEvent};var ve=oe({name:"ElOverlay",props:me,emits:ye,setup(e,{slots:o,emit:s}){const t=q("overlay"),a=l=>{s("click",l)},{onClick:u,onMousedown:n,onMouseup:c}=fe(e.customMaskEvent?void 0:a);return()=>e.mask?te("div",{class:[t.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:u,onMousedown:n,onMouseup:c},[X(o,"default")],O.STYLE|O.CLASS|O.PROPS,["onClick","onMouseup","onMousedown"]):ne("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[X(o,"default")])}});const Le=ve,pe=_({center:{type:Boolean,default:!1},closeIcon:{type:j,default:""},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Ae={close:()=>!0},De=_({...pe,appendToBody:{type:Boolean,default:!1},beforeClose:{type:h(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),Oe={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[V]:e=>Z(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},we=(e,o)=>{const t=ue().emit,{nextZIndex:a}=de();let u="";const n=U(),c=U(),l=D(!1),v=D(!1),r=D(!1),m=D(e.zIndex||a());let i,f;const C=se("namespace",J),w=le(()=>{const d={},A=`--${C.value}-dialog`;return e.fullscreen||(e.top&&(d[`${A}-margin-top`]=e.top),e.width&&(d[`${A}-width`]=Y(e.width))),d});function x(){t("opened")}function B(){t("closed"),t(V,!1),e.destroyOnClose&&(r.value=!1)}function N(){t("close")}function b(){f==null||f(),i==null||i(),e.openDelay&&e.openDelay>0?{stop:i}=z(()=>T(),e.openDelay):T()}function p(){i==null||i(),f==null||f(),e.closeDelay&&e.closeDelay>0?{stop:f}=z(()=>y(),e.closeDelay):y()}function E(){function d(A){A||(v.value=!0,l.value=!1)}e.beforeClose?e.beforeClose(d):p()}function I(){e.closeOnClickModal&&E()}function T(){!G||(l.value=!0)}function y(){l.value=!1}function S(){t("openAutoFocus")}function M(){t("closeAutoFocus")}e.lockScroll&&re(l);function L(){e.closeOnPressEscape&&E()}return k(()=>e.modelValue,d=>{d?(v.value=!1,b(),r.value=!0,t("open"),m.value=e.zIndex?m.value++:a(),ae(()=>{o.value&&(o.value.scrollTop=0)})):l.value&&p()}),k(()=>e.fullscreen,d=>{!o.value||(d?(u=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=u)}),$(()=>{e.modelValue&&(l.value=!0,r.value=!0,b())}),{afterEnter:x,afterLeave:B,beforeLeave:N,handleClose:E,onModalClick:I,close:p,doClose:y,onOpenAutoFocus:S,onCloseAutoFocus:M,onCloseRequested:L,titleId:n,bodyId:c,closed:v,style:w,rendered:r,visible:l,zIndex:m}};export{Le as E,Oe as a,Me as b,re as c,De as d,fe as e,pe as f,Ae as g,we as u};
