import{al as ue,f as H,B as de,U as G,bT as Ce,g as L,bU as Ee,o as f,k as F,H as A,s as E,t as p,l as e,I as Y,D as B,p as S,m as _,q as ce,E as j,J as h,n as q,K as z,_ as W,bV as Re,bN as pe,A as Se,u as K,r as J,Z as fe,bW as Te,F as Fe,G as Pe,x as Le,y as Ue,aY as Z,T as De,L as _e,v as ee,b as V,e as $,bX as Oe,bY as me,bH as Ae,bZ as ve,z as ge,h as se,V as te,av as Be,a5 as Q,ap as U,aU as Ie,bh as ye,b_ as Ne,b$ as Me,c0 as je,a2 as qe,c1 as ze,aA as Ke,a$ as x,c2 as He,c3 as We,w as ae,bi as Ve,c4 as Xe,a0 as Je,a9 as Ye,R as oe}from"./index.6615d0be.js";import{b as Ge,c as Ze,d as Qe,a as xe,u as et}from"./use-dialog.0295def4.js";const tt=(...o)=>a=>{o.forEach(l=>{ue(l)?l(a):l.value=a})},he=Symbol("dialogInjectionKey"),be=Symbol("uploadContextKey"),st=["aria-label"],at=["id"],ot={name:"ElDialogContent"},lt=H({...ot,props:Ge,emits:Ze,setup(o){const a=o,{t:l}=de(),{Close:r}=Re,{dialogRef:c,headerRef:d,bodyId:v,ns:g,style:C}=G(he),{focusTrapRef:b}=G(Ce),u=tt(b,c),w=L(()=>a.draggable);return Ee(c,d,w),(s,t)=>(f(),F("div",{ref:e(u),class:p([e(g).b(),e(g).is("fullscreen",s.fullscreen),e(g).is("draggable",e(w)),{[e(g).m("center")]:s.center},s.customClass]),style:q(e(C)),tabindex:"-1",onClick:t[1]||(t[1]=z(()=>{},["stop"]))},[A("header",{ref_key:"headerRef",ref:d,class:p(e(g).e("header"))},[E(s.$slots,"header",{},()=>[A("span",{role:"heading",class:p(e(g).e("title"))},Y(s.title),3)]),s.showClose?(f(),F("button",{key:0,"aria-label":e(l)("el.dialog.close"),class:p(e(g).e("headerbtn")),type:"button",onClick:t[0]||(t[0]=n=>s.$emit("close"))},[B(e(j),{class:p(e(g).e("close"))},{default:S(()=>[(f(),_(ce(s.closeIcon||e(r))))]),_:1},8,["class"])],10,st)):h("v-if",!0)],2),A("div",{id:e(v),class:p(e(g).e("body"))},[E(s.$slots,"default")],10,at),s.$slots.footer?(f(),F("footer",{key:0,class:p(e(g).e("footer"))},[E(s.$slots,"footer")],2)):h("v-if",!0)],6))}});var nt=W(lt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const rt=["aria-label","aria-labelledby","aria-describedby"],it={name:"ElDialog"},ut=H({...it,props:Qe,emits:xe,setup(o,{expose:a}){const l=o,r=pe();Se({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},L(()=>!!r.title));const c=K("dialog"),d=J(),v=J(),g=J(),{visible:C,titleId:b,bodyId:u,style:w,rendered:s,zIndex:t,afterEnter:n,afterLeave:y,beforeLeave:k,handleClose:m,onModalClick:T,onOpenAutoFocus:i,onCloseAutoFocus:D,onCloseRequested:O}=et(l,d);fe(he,{dialogRef:d,headerRef:v,bodyId:u,ns:c,rendered:s,style:w});const P=Te(T),I=L(()=>l.draggable&&!l.fullscreen);return a({visible:C,dialogContentRef:g}),(R,N)=>(f(),_(_e,{to:"body",disabled:!R.appendToBody},[B(De,{name:"dialog-fade",onAfterEnter:e(n),onAfterLeave:e(y),onBeforeLeave:e(k),persisted:""},{default:S(()=>[Fe(B(e(Le),{"custom-mask-event":"",mask:R.modal,"overlay-class":R.modalClass,"z-index":e(t)},{default:S(()=>[A("div",{role:"dialog","aria-modal":"true","aria-label":R.title||void 0,"aria-labelledby":R.title?void 0:e(b),"aria-describedby":e(u),class:p(`${e(c).namespace.value}-overlay-dialog`),onClick:N[0]||(N[0]=(...M)=>e(P).onClick&&e(P).onClick(...M)),onMousedown:N[1]||(N[1]=(...M)=>e(P).onMousedown&&e(P).onMousedown(...M)),onMouseup:N[2]||(N[2]=(...M)=>e(P).onMouseup&&e(P).onMouseup(...M))},[B(e(Ue),{loop:"",trapped:e(C),"focus-start-el":"container",onFocusAfterTrapped:e(i),onFocusAfterReleased:e(D),onReleaseRequested:e(O)},{default:S(()=>[e(s)?(f(),_(nt,{key:0,ref_key:"dialogContentRef",ref:g,"custom-class":R.customClass,center:R.center,"close-icon":R.closeIcon,draggable:e(I),fullscreen:R.fullscreen,"show-close":R.showClose,title:R.title,onClose:e(m)},Z({header:S(()=>[R.$slots.title?E(R.$slots,"title",{key:1}):E(R.$slots,"header",{key:0,close:e(m),titleId:e(b),titleClass:e(c).e("title")})]),default:S(()=>[E(R.$slots,"default")]),_:2},[R.$slots.footer?{name:"footer",fn:S(()=>[E(R.$slots,"footer")])}:void 0]),1032,["custom-class","center","close-icon","draggable","fullscreen","show-close","title","onClose"])):h("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onReleaseRequested"])],42,rt)]),_:3},8,["mask","overlay-class","z-index"]),[[Pe,e(C)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var dt=W(ut,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const es=ee(dt),ct=V({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:o=>o>=0&&o<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:$(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:$([String,Array,Function]),default:""},format:{type:$(Function),default:o=>`${o}%`}}),pt=["aria-valuenow"],ft={viewBox:"0 0 100 100"},mt=["d","stroke","stroke-width"],vt=["d","stroke","opacity","stroke-linecap","stroke-width"],gt={key:0},yt={name:"ElProgress"},ht=H({...yt,props:ct,setup(o){const a=o,l={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},r=K("progress"),c=L(()=>({width:`${a.percentage}%`,animationDuration:`${a.duration}s`,backgroundColor:T(a.percentage)})),d=L(()=>(a.strokeWidth/a.width*100).toFixed(1)),v=L(()=>["circle","dashboard"].includes(a.type)?Number.parseInt(`${50-Number.parseFloat(d.value)/2}`,10):0),g=L(()=>{const i=v.value,D=a.type==="dashboard";return`
          M 50 50
          m 0 ${D?"":"-"}${i}
          a ${i} ${i} 0 1 1 0 ${D?"-":""}${i*2}
          a ${i} ${i} 0 1 1 0 ${D?"":"-"}${i*2}
          `}),C=L(()=>2*Math.PI*v.value),b=L(()=>a.type==="dashboard"?.75:1),u=L(()=>`${-1*C.value*(1-b.value)/2}px`),w=L(()=>({strokeDasharray:`${C.value*b.value}px, ${C.value}px`,strokeDashoffset:u.value})),s=L(()=>({strokeDasharray:`${C.value*b.value*(a.percentage/100)}px, ${C.value}px`,strokeDashoffset:u.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),t=L(()=>{let i;return a.color?i=T(a.percentage):i=l[a.status]||l.default,i}),n=L(()=>a.status==="warning"?Oe:a.type==="line"?a.status==="success"?me:Ae:a.status==="success"?ve:ge),y=L(()=>a.type==="line"?12+a.strokeWidth*.4:a.width*.111111+2),k=L(()=>a.format(a.percentage));function m(i){const D=100/i.length;return i.map((P,I)=>se(P)?{color:P,percentage:(I+1)*D}:P).sort((P,I)=>P.percentage-I.percentage)}const T=i=>{var D;const{color:O}=a;if(ue(O))return O(i);if(se(O))return O;{const P=m(O);for(const I of P)if(I.percentage>i)return I.color;return(D=P[P.length-1])==null?void 0:D.color}};return(i,D)=>(f(),F("div",{class:p([e(r).b(),e(r).m(i.type),e(r).is(i.status),{[e(r).m("without-text")]:!i.showText,[e(r).m("text-inside")]:i.textInside}]),role:"progressbar","aria-valuenow":i.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[i.type==="line"?(f(),F("div",{key:0,class:p(e(r).b("bar"))},[A("div",{class:p(e(r).be("bar","outer")),style:q({height:`${i.strokeWidth}px`})},[A("div",{class:p([e(r).be("bar","inner"),{[e(r).bem("bar","inner","indeterminate")]:i.indeterminate}]),style:q(e(c))},[(i.showText||i.$slots.default)&&i.textInside?(f(),F("div",{key:0,class:p(e(r).be("bar","innerText"))},[E(i.$slots,"default",{percentage:i.percentage},()=>[A("span",null,Y(e(k)),1)])],2)):h("v-if",!0)],6)],6)],2)):(f(),F("div",{key:1,class:p(e(r).b("circle")),style:q({height:`${i.width}px`,width:`${i.width}px`})},[(f(),F("svg",ft,[A("path",{class:p(e(r).be("circle","track")),d:e(g),stroke:`var(${e(r).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-width":e(d),fill:"none",style:q(e(w))},null,14,mt),A("path",{class:p(e(r).be("circle","path")),d:e(g),stroke:e(t),fill:"none",opacity:i.percentage?1:0,"stroke-linecap":i.strokeLinecap,"stroke-width":e(d),style:q(e(s))},null,14,vt)]))],6)),(i.showText||i.$slots.default)&&!i.textInside?(f(),F("div",{key:2,class:p(e(r).e("text")),style:q({fontSize:`${e(y)}px`})},[E(i.$slots,"default",{percentage:i.percentage},()=>[i.status?(f(),_(e(j),{key:1},{default:S(()=>[(f(),_(ce(e(n))))]),_:1})):(f(),F("span",gt,Y(e(k)),1))])],6)):h("v-if",!0)],10,pt))}});var bt=W(ht,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const kt=ee(bt),$t="ElUpload";class wt extends Error{constructor(a,l,r,c){super(a),this.name="UploadAjaxError",this.status=l,this.method=r,this.url=c}}function le(o,a,l){let r;return l.response?r=`${l.response.error||l.response}`:l.responseText?r=`${l.responseText}`:r=`fail to ${a.method} ${o} ${l.status}`,new wt(r,l.status,a.method,o)}function Ct(o){const a=o.responseText||o.response;if(!a)return a;try{return JSON.parse(a)}catch{return a}}const Et=o=>{typeof XMLHttpRequest=="undefined"&&te($t,"XMLHttpRequest is undefined");const a=new XMLHttpRequest,l=o.action;a.upload&&a.upload.addEventListener("progress",d=>{const v=d;v.percent=d.total>0?d.loaded/d.total*100:0,o.onProgress(v)});const r=new FormData;if(o.data)for(const[d,v]of Object.entries(o.data))Array.isArray(v)?r.append(d,...v):r.append(d,v);r.append(o.filename,o.file,o.file.name),a.addEventListener("error",()=>{o.onError(le(l,o,a))}),a.addEventListener("load",()=>{if(a.status<200||a.status>=300)return o.onError(le(l,o,a));o.onSuccess(Ct(a))}),a.open(o.method,l,!0),o.withCredentials&&"withCredentials"in a&&(a.withCredentials=!0);const c=o.headers||{};if(c instanceof Headers)c.forEach((d,v)=>a.setRequestHeader(v,d));else for(const[d,v]of Object.entries(c))Be(v)||a.setRequestHeader(d,String(v));return a.send(r),a},ke=["text","picture","picture-card"];let Rt=1;const $e=()=>Date.now()+Rt++,we=V({action:{type:String,default:"#"},headers:{type:$(Object)},method:{type:String,default:"post"},data:{type:Object,default:()=>Q({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},fileList:{type:$(Array),default:()=>Q([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:ke,default:"text"},httpRequest:{type:$(Function),default:Et},disabled:Boolean,limit:Number}),St=V({...we,beforeUpload:{type:$(Function),default:U},beforeRemove:{type:$(Function)},onRemove:{type:$(Function),default:U},onChange:{type:$(Function),default:U},onPreview:{type:$(Function),default:U},onSuccess:{type:$(Function),default:U},onProgress:{type:$(Function),default:U},onError:{type:$(Function),default:U},onExceed:{type:$(Function),default:U}}),Tt=V({files:{type:$(Array),default:()=>Q([])},disabled:{type:Boolean,default:!1},handlePreview:{type:$(Function),default:U},listType:{type:String,values:ke,default:"text"}}),Ft={remove:o=>!!o},Pt=["onKeydown"],Lt=["src"],Ut=["onClick"],Dt=["onClick"],_t=["onClick"],Ot={name:"ElUploadList"},At=H({...Ot,props:Tt,emits:Ft,setup(o,{emit:a}){const l=o,{t:r}=de(),c=K("upload"),d=K("icon"),v=K("list"),g=J(!1),C=u=>{l.handlePreview(u)},b=u=>{a("remove",u)};return(u,w)=>(f(),_(ze,{tag:"ul",class:p([e(c).b("list"),e(c).bm("list",u.listType),e(c).is("disabled",u.disabled)]),name:e(v).b()},{default:S(()=>[(f(!0),F(qe,null,Ie(u.files,s=>(f(),F("li",{key:s.uid||s.name,class:p([e(c).be("list","item"),e(c).is(s.status),{focusing:g.value}]),tabindex:"0",onKeydown:ye(t=>!u.disabled&&b(s),["delete"]),onFocus:w[0]||(w[0]=t=>g.value=!0),onBlur:w[1]||(w[1]=t=>g.value=!1),onClick:w[2]||(w[2]=t=>g.value=!1)},[E(u.$slots,"default",{file:s},()=>[u.listType==="picture"||s.status!=="uploading"&&u.listType==="picture-card"?(f(),F("img",{key:0,class:p(e(c).be("list","item-thumbnail")),src:s.url,alt:""},null,10,Lt)):h("v-if",!0),u.listType!=="picture"&&(s.status==="uploading"||u.listType!=="picture-card")?(f(),F("div",{key:1,class:p(e(c).be("list","item-info"))},[A("a",{class:p(e(c).be("list","item-name")),onClick:z(t=>C(s),["prevent"])},[B(e(j),{class:p(e(d).m("document"))},{default:S(()=>[B(e(Ne))]),_:1},8,["class"]),A("span",{class:p(e(c).be("list","item-file-name"))},Y(s.name),3)],10,Ut),s.status==="uploading"?(f(),_(e(kt),{key:0,type:u.listType==="picture-card"?"circle":"line","stroke-width":u.listType==="picture-card"?6:2,percentage:Number(s.percentage),style:q(u.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):h("v-if",!0)],2)):h("v-if",!0),A("label",{class:p(e(c).be("list","item-status-label"))},[u.listType==="text"?(f(),_(e(j),{key:0,class:p([e(d).m("upload-success"),e(d).m("circle-check")])},{default:S(()=>[B(e(me))]),_:1},8,["class"])):["picture-card","picture"].includes(u.listType)?(f(),_(e(j),{key:1,class:p([e(d).m("upload-success"),e(d).m("check")])},{default:S(()=>[B(e(ve))]),_:1},8,["class"])):h("v-if",!0)],2),u.disabled?h("v-if",!0):(f(),_(e(j),{key:2,class:p(e(d).m("close")),onClick:t=>b(s)},{default:S(()=>[B(e(ge))]),_:2},1032,["class","onClick"])),h(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),h(" This is a bug which needs to be fixed "),h(" TODO: Fix the incorrect navigation interaction "),u.disabled?h("v-if",!0):(f(),F("i",{key:3,class:p(e(d).m("close-tip"))},Y(e(r)("el.upload.deleteTip")),3)),u.listType==="picture-card"?(f(),F("span",{key:4,class:p(e(c).be("list","item-actions"))},[A("span",{class:p(e(c).be("list","item-preview")),onClick:t=>u.handlePreview(s)},[B(e(j),{class:p(e(d).m("zoom-in"))},{default:S(()=>[B(e(Me))]),_:1},8,["class"])],10,Dt),u.disabled?h("v-if",!0):(f(),F("span",{key:0,class:p(e(c).be("list","item-delete")),onClick:t=>b(s)},[B(e(j),{class:p(e(d).m("delete"))},{default:S(()=>[B(e(je))]),_:1},8,["class"])],10,_t))],2)):h("v-if",!0)])],42,Pt))),128)),E(u.$slots,"append")]),_:3},8,["class","name"]))}});var ne=W(At,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue"]]);const Bt=V({disabled:{type:Boolean,default:!1}}),It={file:o=>Ke(o)},Nt=["onDrop","onDragover"],Mt={name:"ElUploadDrag"},jt=H({...Mt,props:Bt,emits:It,setup(o,{emit:a}){const l=o,r="ElUploadDrag",c=G(be);c||te(r,"usage: <el-upload><el-upload-dragger /></el-upload>");const d=K("upload"),v=J(!1),g=b=>{if(l.disabled)return;v.value=!1;const u=Array.from(b.dataTransfer.files),w=c.accept.value;if(!w){a("file",u);return}const s=u.filter(t=>{const{type:n,name:y}=t,k=y.includes(".")?`.${y.split(".").pop()}`:"",m=n.replace(/\/.*$/,"");return w.split(",").map(T=>T.trim()).filter(T=>T).some(T=>T.startsWith(".")?k===T:/\/\*$/.test(T)?m===T.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(T)?n===T:!1)});a("file",s)},C=()=>{l.disabled||(v.value=!0)};return(b,u)=>(f(),F("div",{class:p([e(d).b("dragger"),e(d).is("dragover",v.value)]),onDrop:z(g,["prevent"]),onDragover:z(C,["prevent"]),onDragleave:u[0]||(u[0]=z(w=>v.value=!1,["prevent"]))},[E(b.$slots,"default")],42,Nt))}});var qt=W(jt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue"]]);const zt=V({...we,beforeUpload:{type:$(Function),default:U},onRemove:{type:$(Function),default:U},onStart:{type:$(Function),default:U},onSuccess:{type:$(Function),default:U},onProgress:{type:$(Function),default:U},onError:{type:$(Function),default:U},onExceed:{type:$(Function),default:U}}),Kt=["onKeydown"],Ht=["name","multiple","accept"],Wt={name:"ElUploadContent",inheritAttrs:!1},Vt=H({...Wt,props:zt,setup(o,{expose:a}){const l=o,r=K("upload"),c=x({}),d=x(),v=t=>{if(t.length===0)return;const{autoUpload:n,limit:y,fileList:k,multiple:m,onStart:T,onExceed:i}=l;if(y&&k.length+t.length>y){i(t,k);return}m||(t=t.slice(0,1));for(const D of t){const O=D;O.uid=$e(),T(O),n&&g(O)}},g=async t=>{if(d.value.value="",!l.beforeUpload)return C(t);let n;try{n=await l.beforeUpload(t)}catch{n=!1}if(n===!1){l.onRemove(t);return}let y=t;n instanceof Blob&&(n instanceof File?y=n:y=new File([n],t.name,{type:t.type})),C(Object.assign(y,{uid:t.uid}))},C=t=>{const{headers:n,data:y,method:k,withCredentials:m,name:T,action:i,onProgress:D,onSuccess:O,onError:P,httpRequest:I}=l,{uid:R}=t,N={headers:n||{},withCredentials:m,file:t,data:y,method:k,filename:T,action:i,onProgress:X=>{D(X,t)},onSuccess:X=>{O(X,t),delete c.value[R]},onError:X=>{P(X,t),delete c.value[R]}},M=I(N);c.value[R]=M,M instanceof Promise&&M.then(N.onSuccess,N.onError)},b=t=>{const n=t.target.files;!n||v(Array.from(n))},u=()=>{l.disabled||(d.value.value="",d.value.click())},w=()=>{u()};return a({abort:t=>{He(c.value).filter(t?([y])=>String(t.uid)===y:()=>!0).forEach(([y,k])=>{k instanceof XMLHttpRequest&&k.abort(),delete c.value[y]})},upload:g}),(t,n)=>(f(),F("div",{class:p([e(r).b(),e(r).m(t.listType),e(r).is("drag",t.drag)]),tabindex:"0",onClick:u,onKeydown:ye(z(w,["self"]),["enter","space"])},[t.drag?(f(),_(qt,{key:0,disabled:t.disabled,onFile:v},{default:S(()=>[E(t.$slots,"default")]),_:3},8,["disabled"])):E(t.$slots,"default",{key:1}),A("input",{ref_key:"inputRef",ref:d,class:p(e(r).e("input")),name:t.name,multiple:t.multiple,accept:t.accept,type:"file",onChange:b,onClick:n[0]||(n[0]=z(()=>{},["stop"]))},null,42,Ht)],42,Kt))}});var re=W(Vt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue"]]);const ie="ElUpload",Xt=o=>{var a;(a=o.url)!=null&&a.startsWith("blob:")&&URL.revokeObjectURL(o.url)},Jt=(o,a)=>{const l=We(o,"fileList",void 0,{passive:!0}),r=s=>l.value.find(t=>t.uid===s.uid);function c(s){var t;(t=a.value)==null||t.abort(s)}function d(s=["ready","uploading","success","fail"]){l.value=l.value.filter(t=>!s.includes(t.status))}const v=(s,t)=>{const n=r(t);!n||(console.error(s),n.status="fail",l.value.splice(l.value.indexOf(n),1),o.onError(s,n,l.value),o.onChange(n,l.value))},g=(s,t)=>{const n=r(t);!n||(o.onProgress(s,n,l.value),n.status="uploading",n.percentage=Math.round(s.percent))},C=(s,t)=>{const n=r(t);!n||(n.status="success",n.response=s,o.onSuccess(s,n,l.value),o.onChange(n,l.value))},b=s=>{const t={name:s.name,percentage:0,status:"ready",size:s.size,raw:s,uid:s.uid};if(o.listType==="picture-card"||o.listType==="picture")try{t.url=URL.createObjectURL(s)}catch(n){Ve(ie,n.message),o.onError(n,t,l.value)}l.value.push(t),o.onChange(t,l.value)},u=async s=>{const t=s instanceof File?r(s):s;t||te(ie,"file to be removed not found");const n=y=>{c(y);const k=l.value;k.splice(k.indexOf(y),1),o.onRemove(y,k),Xt(y)};o.beforeRemove?await o.beforeRemove(t,l.value)!==!1&&n(t):n(t)};function w(){l.value.filter(({status:s})=>s==="ready").forEach(({raw:s})=>{var t;return s&&((t=a.value)==null?void 0:t.upload(s))})}return ae(()=>o.listType,s=>{s!=="picture-card"&&s!=="picture"||(l.value=l.value.map(t=>{const{raw:n,url:y}=t;if(!y&&n)try{t.url=URL.createObjectURL(n)}catch(k){o.onError(k,t,l.value)}return t}))}),ae(l,s=>{for(const t of s)t.uid||(t.uid=$e()),t.status||(t.status="success")},{immediate:!0,deep:!0}),{uploadFiles:l,abort:c,clearFiles:d,handleError:v,handleProgress:g,handleStart:b,handleSuccess:C,handleRemove:u,submit:w}},Yt={name:"ElUpload"},Gt=H({...Yt,props:St,setup(o,{expose:a}){const l=o,r=pe(),c=Xe(),d=x(),{abort:v,submit:g,clearFiles:C,uploadFiles:b,handleStart:u,handleError:w,handleRemove:s,handleSuccess:t,handleProgress:n}=Jt(l,d),y=L(()=>l.listType==="picture-card"),k=L(()=>({...l,onStart:u,onProgress:n,onSuccess:t,onError:w,onRemove:s}));return Je(()=>{b.value.forEach(({url:m})=>{m!=null&&m.startsWith("blob:")&&URL.revokeObjectURL(m)})}),fe(be,{accept:Ye(l,"accept")}),a({abort:v,submit:g,clearFiles:C,handleStart:u,handleRemove:s}),(m,T)=>(f(),F("div",null,[e(y)&&m.showFileList?(f(),_(ne,{key:0,disabled:e(c),"list-type":m.listType,files:e(b),"handle-preview":m.onPreview,onRemove:e(s)},Z({append:S(()=>[m.listType==="picture-card"?(f(),_(re,oe({key:0,ref_key:"uploadRef",ref:d},e(k)),{default:S(()=>[e(r).trigger?E(m.$slots,"trigger",{key:0}):h("v-if",!0),!e(r).trigger&&e(r).default?E(m.$slots,"default",{key:1}):h("v-if",!0)]),_:3},16)):h("v-if",!0)]),_:2},[m.$slots.file?{name:"default",fn:S(({file:i})=>[E(m.$slots,"file",{file:i})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):h("v-if",!0),m.listType!=="picture-card"?(f(),_(re,oe({key:1,ref_key:"uploadRef",ref:d},e(k)),{default:S(()=>[e(r).trigger?E(m.$slots,"trigger",{key:0}):h("v-if",!0),!e(r).trigger&&e(r).default?E(m.$slots,"default",{key:1}):h("v-if",!0)]),_:3},16)):h("v-if",!0),m.$slots.trigger?E(m.$slots,"default",{key:2}):h("v-if",!0),E(m.$slots,"tip"),!e(y)&&m.showFileList?(f(),_(ne,{key:3,disabled:e(c),"list-type":m.listType,files:e(b),"handle-preview":m.onPreview,onRemove:e(s)},Z({_:2},[m.$slots.file?{name:"default",fn:S(({file:i})=>[E(m.$slots,"file",{file:i})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):h("v-if",!0)]))}});var Zt=W(Gt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue"]]);const ts=ee(Zt);export{ts as E,es as a,kt as b};
